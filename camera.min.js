(function(k,f){k.Camera=new function(){var c={width:640,height:480,rootEle:null,canvas:null},b,l,e,g,h,n=function(a){if(a){(b=document.querySelector(c.canvas))?(g=b.height,h=b.width):(b=document.createElement("canvas"),g=b.height=c.height,h=b.width=c.width);var d=document.createDocumentFragment();l=b.getContext("2d");e=document.createElement("video");e.height=c.height;e.width=c.width;d.appendChild(e);document.querySelector(a).appendChild(d)}else f.error("Invalid DOM ID passed to Camera config...")},
m=function(a){return a.toDataURL("image/jpeg")},p=function(a,d){d=d||function(){};Object.keys(d).forEach(function(b){a[b]=d[b]});return a};return{init:function(a){p(c,a);navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;navigator.getUserMedia?(n(c.rootEle),navigator.getUserMedia({video:!0},function(a){var b=document.querySelector("video");b.src=k.URL.createObjectURL(a);b.play()},function(a){f.error("The following error occured: "+
a)})):f.error("getUserMedia not supported")},snapshot:function(a){a=a||function(){};l.drawImage(e,0,0,h,g);a(m(b))},getURI:m}}})(window,window.console);